## Phased In Binary Codes
Phased in codes are used to compress data where symbols have equal probabilities to appear in our data.
That is, the expected value of a random variable ![](https://latex.codecogs.com/svg.latex?X) for each symbol in a set of ![](https://latex.codecogs.com/svg.latex?N) symbols, is around ![](https://latex.codecogs.com/svg.latex?%5Cfrac%7B1%7D%7BN%7D) .

One idea to compress data whose symbols have equal probabilities is to assign a fixed-length code for each symbol. If we assign fixed-length codes then each codeword whould be ![](https://latex.codecogs.com/svg.latex?%5Cleft%20%5Clceil%20log_2%7BN%7D%20%5Cright%20%5Crceil) bits long which is easy to see that not all the codewords whould be used. Let's take a simple example where ![](https://latex.codecogs.com/svg.latex?N) = 1000. In this case each codeword is ![](https://latex.codecogs.com/svg.latex?%5Cleft%20%5Clceil%20log_2%7B1000%7D%20%5Cright%20%5Crceil%20%3D%2010) bits long and only 1000 out of 1024 possible codewords are used.

Phased in codes main idea is to try and assing two sets of codes to the ![](https://latex.codecogs.com/svg.latex?N)  symbols, where the codewords in one set are ![](https://latex.codecogs.com/svg.latex?m%20-%201) bits long and the codewords of the other set are ![](https://latex.codecogs.com/svg.latex?m) bits long where ![](https://latex.codecogs.com/svg.latex?m%20%3D%20log_2%7BN%7D).

So for the case where ![](https://latex.codecogs.com/svg.latex?N) is not a power of two, then ![](https://latex.codecogs.com/svg.latex?N) is ![](https://latex.codecogs.com/svg.latex?2%5Em%20&plus;%20p) where ![](https://latex.codecogs.com/svg.latex?m%20%3D%20%5Cleft%20%5Clfloor%20log_2%7BN%7D%20%5Cright%20%5Crfloor). Using that decomposition, we can compute the threshold which is ![](https://latex.codecogs.com/svg.latex?P%20%3D%202%5Em%20-%20p). If a value is smaller than the threshold then it receives a code ![](https://latex.codecogs.com/svg.latex?m) bits long. If it greater or equal then it receives a code ![](https://latex.codecogs.com/svg.latex?m%20+%201) bits long.

### Encoding
Encoding symbols to phased in codes is pretty easy.
First the encoder inputs the total number of distinct symbols ![](https://latex.codecogs.com/svg.latex?N) and computes ![](https://latex.codecogs.com/svg.latex?m), ![](https://latex.codecogs.com/svg.latex?p) and ![](https://latex.codecogs.com/svg.latex?P).
Then it inputs a symbol ![](https://latex.codecogs.com/svg.latex?S) to encode. If ![](https://latex.codecogs.com/svg.latex?S) is less than ![](https://latex.codecogs.com/svg.latex?P) the encoder just outputs the value we get when we extract the ![](https://latex.codecogs.com/svg.latex?m) least significant bits from the symbol. Otherwise, the encoder constructs an ![](https://latex.codecogs.com/svg.latex?%28m%20&plus;%201%29)-bit codeword where the first ![](https://latex.codecogs.com/svg.latex?m) bits have the value ![](https://latex.codecogs.com/svg.latex?P%20&plus;%20%28S%20-%20P%29%20/%202) and the rightmost bit is ![](https://latex.codecogs.com/svg.latex?%28S%20-%20P%29%5C%20mod%5C%202).

### Decoding
Decoding phased in codes to symbols is also really easy.
First the decoder, as the encoder, inputs the number of distinct symbols ![](https://latex.codecogs.com/svg.latex?N) and computes ![](https://latex.codecogs.com/svg.latex?m), ![](https://latex.codecogs.com/svg.latex?p) and ![](https://latex.codecogs.com/svg.latex?P).
Then it inputs the next ![](https://latex.codecogs.com/svg.latex?m) bits into ![](https://latex.codecogs.com/svg.latex?i). If ![](https://latex.codecogs.com/svg.latex?i) is less than ![](https://latex.codecogs.com/svg.latex?P) then this is the entire symbols. Otherwise, it inputs the next bit ![](https://latex.codecogs.com/svg.latex?b) and adds it to ![](https://latex.codecogs.com/svg.latex?P%20&plus;%20%28i%20-%20P%29%20*%202). So the symbol is equal to ![](https://latex.codecogs.com/svg.latex?b%20&plus;%20P%20&plus;%20%28i%20-%20P%29%20*%202).
